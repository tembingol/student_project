"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.authRouter = void 0;
const express_1 = require("express");
const auth_validators_1 = require("./middlewares/auth-validators");
const refreshToken_validator_1 = require("./middlewares/refreshToken-validator");
const sessions_middleware_1 = require("../../global-middlewares/sessions-middleware");
const accessToken_validator_1 = require("./middlewares/accessToken-validator");
const composition_root_1 = require("../../composition-root");
exports.authRouter = (0, express_1.Router)({});
exports.authRouter.post('/registration', sessions_middleware_1.incomingRequestsCheckMiddleware, ...auth_validators_1.authRegistrationValidators, composition_root_1.authController.registration.bind(composition_root_1.authController));
exports.authRouter.post('/registration-confirmation', sessions_middleware_1.incomingRequestsCheckMiddleware, composition_root_1.authController.registrationConfirmation.bind(composition_root_1.authController));
exports.authRouter.post('/registration-email-resending', sessions_middleware_1.incomingRequestsCheckMiddleware, composition_root_1.authController.registrationEmailResending.bind(composition_root_1.authController));
exports.authRouter.post('/login', sessions_middleware_1.incomingRequestsCheckMiddleware, ...auth_validators_1.authLoginValidators, composition_root_1.authController.login.bind(composition_root_1.authController));
exports.authRouter.post('/logout', composition_root_1.authController.logout.bind(composition_root_1.authController));
exports.authRouter.post('/refresh-token', refreshToken_validator_1.refteshTokenValidator, composition_root_1.authController.refreshTokens.bind(composition_root_1.authController));
exports.authRouter.get('/login/me', accessToken_validator_1.accessTokenValidator, composition_root_1.authController.getMe.bind(composition_root_1.authController));
exports.authRouter.get('/me', accessToken_validator_1.accessTokenValidator, composition_root_1.authController.getMe.bind(composition_root_1.authController));
exports.authRouter.post('/password-recovery', sessions_middleware_1.incomingRequestsCheckMiddleware, composition_root_1.authController.passwordRecovery.bind(composition_root_1.authController));
exports.authRouter.post('/new-password', sessions_middleware_1.incomingRequestsCheckMiddleware, composition_root_1.authController.setNewPassword.bind(composition_root_1.authController));
